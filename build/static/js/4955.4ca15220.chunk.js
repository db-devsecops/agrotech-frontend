"use strict";(self.webpackChunkagrotech_frontend=self.webpackChunkagrotech_frontend||[]).push([[4955],{59385:function(e,n,t){t.d(n,{O9:function(){return i},ul:function(){return s},xJ:function(){return c},xQ:function(){return l},IN:function(){return u},ZV:function(){return d}});var o=t(1413),r=t(83684),a=t(11979),i=function(e){return function(n,t,a){var i=a.api;return new Promise((function(n,t){i((0,o.Z)((0,o.Z)({},r.vT.addRoles),{},{body:e})).then((function(e){var t=e.data;n(t)})).catch((function(e){t(e)}))}))}},s=function(e,n){return function(t,a,i){var s=i.api;return new Promise((function(t,a){r.vT.updateRoles.id=n,s((0,o.Z)((0,o.Z)({},r.vT.updateRoles),{},{body:e})).then((function(e){var n=e.data;t(n)})).catch((function(e){var n=e.message;a(n)}))}))}},c=function(e,n){return function(t,i,s){var c=s.api;return new Promise((function(t,i){(0,a.DI)(e,r.vT.getRoles),c((0,o.Z)((0,o.Z)({},r.vT.getRoles),{},{body:n})).then((function(e){var n=e.data;t(n)})).catch((function(e){var n=e.message;i(n)}))}))}},l=function(e,n){return function(t,i,s){var c=s.api;return new Promise((function(t,i){(0,a.DI)(e,r.vT.getRoleById),c((0,o.Z)((0,o.Z)({},r.vT.getRoleById),{},{body:n})).then((function(e){var n=e.data;t(n)})).catch((function(e){var n=e.message;i(n)}))}))}},u=function(e){return function(n,t,a){var i=a.api;return new Promise((function(n,t){i((0,o.Z)((0,o.Z)({},r.vT.getPermissions),{},{body:e})).then((function(e){var t=e.data;n(t)})).catch((function(e){var n=e.message;t(n)}))}))}},d=function(e,n){return function(t,i,s){var c=s.api;return new Promise((function(t,i){(0,a.DI)(e,r.vT.deleteRoles),c((0,o.Z)((0,o.Z)({},r.vT.deleteRoles),{},{body:n})).then((function(e){var n=e.data;t(n)})).catch((function(e){var n=e.message;i(n)}))}))}}},49845:function(e,n,t){t.d(n,{Z:function(){return c}});t(47313);var o=t(57829),r=t(61113),a=t(33286),i=(t(45214),t(46417)),s={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,outline:"none",p:4};function c(e){var n=e.openModal,t=e.handleCloseModal,c=e.text,l=e.deleteModal;return(0,i.jsx)("div",{children:(0,i.jsx)(a.Z,{open:n,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsxs)(o.Z,{sx:s,children:[(0,i.jsx)(r.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:c}),(0,i.jsxs)("div",{className:"delete-modal-btns",children:[(0,i.jsx)("button",{onClick:l,className:"confirm",children:"Yes"}),(0,i.jsx)("button",{onClick:t,className:"delete",children:"No"})]})]})})})}},46495:function(e,n,t){t.d(n,{Z:function(){return r}});t(47313);var o=t(46417);function r(e){var n=e.text,t=e.trigger;return(0,o.jsx)("button",{className:"green-btn",onClick:t,children:n})}},24554:function(e,n,t){t.d(n,{Z:function(){return s}});var o=t(29439),r=t(47313),a=t(97548),i=t(46417);function s(e){var n=e.selectPage,t=e.pageNumbers,s=e.totalItemsCount,c=e.totalItemsPerPage,l=e.pageName,u=e.isPrevPage,d=(0,r.useState)(!1),f=(0,o.Z)(d,2),h=f[0],p=f[1],g=(0,r.useState)(u&&localStorage.getItem(l)?Number(localStorage.getItem(l)):1),m=(0,o.Z)(g,2),v=m[0],x=m[1];return h?(0,i.jsx)(a.Z,{itemsCountPerPage:c,totalItemsCount:s,pageRangeDisplayed:t,disabledClass:!0,activeClass:"pagination-active",innerClass:"pagination-button",hideFirstLastPages:!0,prevPageText:"\xab",nextPageText:"\xbb"}):(0,i.jsx)(a.Z,{activePage:v,itemsCountPerPage:c,totalItemsCount:s,pageRangeDisplayed:t,onChange:function(e){p(!0),n(e),function(e,n){localStorage.setItem(n,e)}(e,l),x(e),setTimeout((function(){p(!1)}),100)},disabledClass:!0,activeClass:"pagination-active",innerClass:"pagination-button",hideFirstLastPages:!0,prevPageText:"\xab",nextPageText:"\xbb"})}},45214:function(e,n,t){t.d(n,{Z:function(){return a}});t(47313);var o=t(97477),r=t(46417);function a(e){var n=e.text,t=e.trigger;return(0,r.jsxs)("div",{className:"green-btn-container",children:[(0,r.jsx)("button",{className:"red-button",onClick:t,children:n}),(0,r.jsx)("img",{className:"green-plus",src:o})]})}},78100:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var o=t(47313),r=t(29439),a=t(97890),i=t(4942),s=t(88564),c=t(66835),l=t(57861),u=t(70941),d=t(19438),f=t(51629),h=t(23477),p=t(24076),g=t(82295),m=t(58821),v=(t(26564),t(46417)),x=(0,s.ZP)(u.Z)((function(e){var n;e.theme;return n={},(0,i.Z)(n,"&.".concat(d.Z.head),{backgroundColor:"#FBFBFB",color:"#999999",fontFamily:"Inter",fontSize:16,height:10}),(0,i.Z)(n,"&.".concat(d.Z.body),{color:"#000000",fontFamily:"Inter"}),n})),Z=(0,s.ZP)(p.Z)((function(e){e.theme;return{"&:nth-of-type(even)":{backgroundColor:"#FBFBFB",height:10},"&:last-child td, &:last-child th":{border:0}}}));function j(e){var n=e.row,t=e.index,o=e.newApplication,r=e.permissions,a=e.deleteModal,i=e.sNo,s=r.filter((function(e){return n.permissions.indexOf(e.permissionId)>=0}));return s=s.map((function(e){return e.name})),(0,v.jsxs)(Z,{children:[(0,v.jsx)(x,{component:"th",scope:"row",children:i[t]}),(0,v.jsx)(x,{className:"table-cells",children:n.roleName}),(0,v.jsx)(x,{children:s.length>0?s.join(", "):(0,v.jsx)("b",{children:"No Permissions for This Role"})}),(0,v.jsx)(x,{children:(0,v.jsxs)("div",{className:"action-items",children:[(0,v.jsx)(m.Ph1,{className:"view-icon",color:"#228b22",onClick:function(){return o(n._id,n)},size:20}),(0,v.jsx)(m.Wg8,{className:"view-icon",color:"#228b22",onClick:function(){return a(n._id)},size:20})]})})]},n.name)}var A=(0,s.ZP)(u.Z)((function(e){var n;e.theme;return n={},(0,i.Z)(n,"&.".concat(d.Z.head),{backgroundColor:"#FBFBFB",color:"#999999",fontFamily:"Inter",fontSize:16,height:10}),(0,i.Z)(n,"&.".concat(d.Z.body),{color:"#000000",fontFamily:"Inter"}),n}));function y(e){var n=e.details,t=e.deleteRoles,o=e.newApplication,r=e.permissions,a=e.deleteModal,i=e.sNo;return(0,v.jsx)(f.Z,{component:g.Z,children:(0,v.jsxs)(c.Z,{sx:{minWidth:700},"aria-label":"customized table",children:[(0,v.jsx)(h.Z,{children:(0,v.jsxs)(p.Z,{children:[(0,v.jsx)(A,{style:{width:50},children:"S.No"}),(0,v.jsx)(A,{style:{width:200},children:"Role"}),(0,v.jsx)(A,{style:{width:400},children:"Permissions"}),(0,v.jsx)(A,{style:{width:100},children:"Action"})]})}),n.length>0?(0,v.jsx)(l.Z,{children:n.map((function(e,n){return(0,v.jsx)(j,{row:e,deleteRoles:t,newApplication:o,index:n,permissions:r,deleteModal:a,sNo:i})}))}):(0,v.jsx)("div",{className:"no-data",children:(0,v.jsx)("h1",{children:"No Records Found"})})]})})}var b=t(24554),N=t(46495),w=t(1084),P=t(9038),C=t(59385),B=t(8512),M=t(49845);t(88282);var R=function(e){var n=(0,o.useState)([]),t=(0,r.Z)(n,2),i=t[0],s=t[1],c=(0,o.useState)(1),l=(0,r.Z)(c,2),u=l[0],d=l[1],f=(0,o.useState)(""),h=(0,r.Z)(f,2),p=h[0],g=h[1],m=(0,o.useState)(1),x=(0,r.Z)(m,2),Z=x[0],j=x[1],A=(0,o.useState)(1),w=(0,r.Z)(A,2),P=w[0],C=w[1],R=(0,o.useState)([]),S=(0,r.Z)(R,2),T=S[0],I=S[1],F=(0,o.useState)([]),k=(0,r.Z)(F,2),W=k[0],E=k[1],U=(0,o.useState)(""),q=(0,r.Z)(U,2),D=q[0],Y=q[1],z=(0,o.useState)("10"),G=(0,r.Z)(z,2),K=G[0],L=G[1],J=o.useState(!1),X=(0,r.Z)(J,2),Q=X[0],O=X[1],V=(0,o.useState)(""),H=(0,r.Z)(V,2),_=H[0],$=H[1],ee=function(){return O(!1)},ne=(0,a.s0)(),te=function(e,n){e&&ne("/new-roles",{state:{id:e,type:"Edit",data:n}})},oe=function(){var n={page:u,limit:K,name:p};e.getAllRoles(n).then((function(e){j(e.pageMeta.totalPages),C(e.pageMeta.total),s(e.list),E(e.pageMeta.sNo),Y(e.list.length)})).catch((function(e){console.log(e)}))},re=function(){e.getAllPermissions().then((function(e){I(e)})).catch((function(e){console.log(e)}))},ae=function(){var n={id:_};e.deleteRoles(n).then((function(){B.Am.success("Role Deleted"),ee(),oe()})).catch((function(e){B.Am.error(e)}))};return(0,o.useEffect)((function(){return oe(),re(),function(){oe(),re()}}),[u,p,K]),(0,v.jsxs)("div",{children:[(0,v.jsx)(B.Ix,{}),(0,v.jsxs)("div",{className:"userRoles-container",children:[(0,v.jsx)("h3",{children:"Roles Management"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"role-text",children:"Role"}),(0,v.jsxs)("select",{className:"select",name:"roles",id:"roles",onChange:function(e){g(e.target.value)},children:[(0,v.jsx)("option",{value:"",children:"All"}),(0,v.jsx)("option",{value:"AgroTech User",children:"AgroTech User"}),(0,v.jsx)("option",{value:"Branch Manager",children:"Branch Manager"}),(0,v.jsx)("option",{value:"Agrotech Manager",children:"Agrotech Manager"}),(0,v.jsx)("option",{value:"Bank Executive",children:"Bank Executive"})]}),(0,v.jsx)(N.Z,{text:"Add Role",trigger:function(){ne("/new-roles",{state:{type:"New"}})}})]})]}),(0,v.jsxs)("div",{className:"table-container user-roles-table",children:[(0,v.jsx)(y,{deleteRoles:ae,details:i,newApplication:te,permissions:T,deleteModal:function(e){O(!0),$(e)},sNo:W}),(null===te||void 0===te?void 0:te.length)>0?(0,v.jsxs)("div",{className:"table-footer",children:["".concat(W[0]," - ").concat(W[D-1]," of ").concat(P),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"role-text",children:"Show"}),(0,v.jsxs)("select",{className:"select",name:"limit",id:"limit",onChange:function(e){L(e.target.value)},children:[(0,v.jsx)("option",{value:"5",children:"5"}),(0,v.jsx)("option",{value:"10",selected:!0,children:"10"}),(0,v.jsx)("option",{value:"15",children:"15"}),(0,v.jsx)("option",{value:"20",children:"20"}),(0,v.jsx)("option",{value:"25",children:"25"}),(0,v.jsx)("option",{value:"50",children:"50"}),(0,v.jsx)("option",{value:"100",children:"100"}),(0,v.jsx)("option",{value:"0",children:"All"})]}),(0,v.jsx)("span",{className:"role-text",children:"Per Page"})]}),(0,v.jsx)(b.Z,{pageNumbers:Z>3?3:Z,totalItemsCount:10*P,selectPage:function(e){d(e)}})]}):(0,v.jsx)(v.Fragment,{})]}),(0,v.jsx)(M.Z,{text:"Are you sure you want to delete this role?",openModal:Q,handleCloseModal:ee,deleteModal:ae})]})},S=(0,w.$j)(null,(function(e){return(0,P.DE)({getAllRoles:C.xJ,deleteRoles:C.ZV,getAllPermissions:C.IN},e)}))(R);function T(){return(0,v.jsx)(S,{})}},57829:function(e,n,t){t.d(n,{Z:function(){return g}});var o=t(87462),r=t(63366),a=t(47313),i=t(83061),s=t(80297),c=t(63649),l=t(39028),u=t(84647),d=t(46417),f=["className","component"];var h=t(80672),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultTheme,t=e.defaultClassName,h=void 0===t?"MuiBox-root":t,p=e.generateClassName,g=e.styleFunctionSx,m=void 0===g?c.Z:g,v=(0,s.ZP)("div")(m),x=a.forwardRef((function(e,t){var a=(0,u.Z)(n),s=(0,l.Z)(e),c=s.className,g=s.component,m=void 0===g?"div":g,x=(0,r.Z)(s,f);return(0,d.jsx)(v,(0,o.Z)({as:m,ref:t,className:(0,i.Z)(c,p?p(h):h),theme:a},x))}));return x}({defaultTheme:(0,t(27458).Z)(),defaultClassName:"MuiBox-root",generateClassName:h.Z.generate}),g=p},61113:function(e,n,t){t.d(n,{Z:function(){return Z}});var o=t(63366),r=t(87462),a=t(47313),i=t(83061),s=t(39028),c=t(50317),l=t(88564),u=t(29394),d=t(91615),f=t(22131);function h(e){return(0,f.Z)("MuiTypography",e)}(0,t(655).Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var p=t(46417),g=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],m=(0,l.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.variant&&n[t.variant],"inherit"!==t.align&&n["align".concat((0,d.Z)(t.align))],t.noWrap&&n.noWrap,t.gutterBottom&&n.gutterBottom,t.paragraph&&n.paragraph]}})((function(e){var n=e.theme,t=e.ownerState;return(0,r.Z)({margin:0},t.variant&&n.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})})),v={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},x={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Z=a.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiTypography"}),a=function(e){return x[e]||e}(t.color),l=(0,s.Z)((0,r.Z)({},t,{color:a})),f=l.align,Z=void 0===f?"inherit":f,j=l.className,A=l.component,y=l.gutterBottom,b=void 0!==y&&y,N=l.noWrap,w=void 0!==N&&N,P=l.paragraph,C=void 0!==P&&P,B=l.variant,M=void 0===B?"body1":B,R=l.variantMapping,S=void 0===R?v:R,T=(0,o.Z)(l,g),I=(0,r.Z)({},l,{align:Z,color:a,className:j,component:A,gutterBottom:b,noWrap:w,paragraph:C,variant:M,variantMapping:S}),F=A||(C?"p":S[M]||v[M])||"span",k=function(e){var n=e.align,t=e.gutterBottom,o=e.noWrap,r=e.paragraph,a=e.variant,i=e.classes,s={root:["root",a,"inherit"!==e.align&&"align".concat((0,d.Z)(n)),t&&"gutterBottom",o&&"noWrap",r&&"paragraph"]};return(0,c.Z)(s,h,i)}(I);return(0,p.jsx)(m,(0,r.Z)({as:F,ref:n,ownerState:I,className:(0,i.Z)(k.root,j)},T))}))},19860:function(e,n,t){t.d(n,{Z:function(){return a}});t(47313);var o=t(84647),r=t(72248);function a(){return(0,o.Z)(r.Z)}},86983:function(e,n,t){var o=t(47472);n.Z=o.Z},39028:function(e,n,t){t.d(n,{Z:function(){return l}});var o=t(93433),r=t(87462),a=t(63366),i=t(13019),s=t(29716),c=["sx"];function l(e){var n,t=e.sx,l=function(e){var n={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(t){s.Gc[t]?n.systemProps[t]=e[t]:n.otherProps[t]=e[t]})),n}((0,a.Z)(e,c)),u=l.systemProps,d=l.otherProps;return n=Array.isArray(t)?[u].concat((0,o.Z)(t)):"function"===typeof t?function(){var e=t.apply(void 0,arguments);return(0,i.P)(e)?(0,r.Z)({},u,e):u}:(0,r.Z)({},u,t),(0,r.Z)({},d,{sx:n})}},49081:function(e,n,t){function o(e){return e&&e.ownerDocument||document}t.d(n,{Z:function(){return o}})},93282:function(e,n,t){t.d(n,{Z:function(){return r}});var o=t(49081);function r(e){return(0,o.Z)(e).defaultView||window}},89265:function(e,n,t){function o(e,n){"function"===typeof e?e(n):e&&(e.current=n)}t.d(n,{Z:function(){return o}})},2678:function(e,n,t){var o=t(47313),r="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;n.Z=r},42780:function(e,n,t){t.d(n,{Z:function(){return a}});var o=t(47313),r=t(2678);function a(e){var n=o.useRef(e);return(0,r.Z)((function(){n.current=e})),o.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}},47472:function(e,n,t){t.d(n,{Z:function(){return a}});var o=t(47313),r=t(89265);function a(e,n){return o.useMemo((function(){return null==e&&null==n?null:function(t){(0,r.Z)(e,t),(0,r.Z)(n,t)}}),[e,n])}},20010:function(e,n,t){var o=t(47313);n.Z=o.createContext(null)},26564:function(){},97477:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAK4SURBVHgBrVZNbhMxFH52ghBsOukFcKYH6HACgoRAYtNwArJllWZBBasmK0QDCjlBwwmgy0ogpidILtB2OEG9AQpqbL7nzESZZmbyozwp8djv+X3Pfn8WVECqrTy6RzVZkntkqUaCPIwe8yzZkRBiJIw4Oz84HxTpEXkMv+sfgrvvlArS1jqlUcLHXGEexKC8Prh4fdFZCkS9U0qUxRdBIoC1IX4d+kWjqB3pLAXqSDUA1mR5BjM35nH0NopyQbAhkFL+mJhKHVj2iZYkBpNC9vjbWAAdRKM5ED6BvCOHUK6zrFkKiHWUnZEedDxMdMhEIGbSugBMvI/3O+tx5cl6if/8j3Cypbqw4tXlm8uQCizdfrZ9vPV861Sf6ussGf1d68rTyl/4qFF5UhFX367CyUkMNTgkF4UilUnhgut0TUGRGPuSgwb31FQ95Ul2GBsprezTBslFJXxD/5BnoEeY6IWnWJXKxNGlEXF7EpCcDyPaMEWtSDu9gmplzAM4fHBbyJWUu+m7h1W7MIojMUAQzOmdi0pDP+GXoEw5VLpfOrbC1lOLdvrVA1CaZe0JhnqGKo9BMsvFeDxu4V5TwSBJ8sk4q1uGTPqKf1PulTsQWKxuM+KjR7NrqqsYiBN2BH5Ii0jSA/aLtMaecXHjeKYNE+vldiBtyX4ljucFCbYqxfnncb+RKCwhJhq15pA2SFz+MUScf5LjGZM+jlbz3/v7hTs5wQTxyaMiMddjuL8Y+uwAE0a1Wx2CoWZL9Do02zJQw6q8Ng12e2NfuAWUfBakNWimn1BS8lMgrhdYx/AgONw52mnQCuR/8JvuBHhsGJPuSaLAGjWJcdnPK55J6eGgYZ+yPN9IYY9PWdb12xhesq6FrxXwMfbhg3aWrlyQqbWT10gNn7vxi4RipRpjaMbmhP5QmPeaYfoPxL9GyMP66mAAAAAASUVORK5CYII="}}]);