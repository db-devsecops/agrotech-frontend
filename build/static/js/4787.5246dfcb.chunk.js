"use strict";(self.webpackChunkagrotech_frontend=self.webpackChunkagrotech_frontend||[]).push([[4787],{59385:function(e,n,t){t.d(n,{O9:function(){return a},ul:function(){return s},xJ:function(){return c},xQ:function(){return u},IN:function(){return l},ZV:function(){return d}});var o=t(1413),i=t(83684),r=t(11979),a=function(e){return function(n,t,r){var a=r.api;return new Promise((function(n,t){a((0,o.Z)((0,o.Z)({},i.vT.addRoles),{},{body:e})).then((function(e){var t=e.data;n(t)})).catch((function(e){t(e)}))}))}},s=function(e,n){return function(t,r,a){var s=a.api;return new Promise((function(t,r){i.vT.updateRoles.id=n,s((0,o.Z)((0,o.Z)({},i.vT.updateRoles),{},{body:e})).then((function(e){var n=e.data;t(n)})).catch((function(e){var n=e.message;r(n)}))}))}},c=function(e,n){return function(t,a,s){var c=s.api;return new Promise((function(t,a){(0,r.DI)(e,i.vT.getRoles),c((0,o.Z)((0,o.Z)({},i.vT.getRoles),{},{body:n})).then((function(e){var n=e.data;t(n)})).catch((function(e){var n=e.message;a(n)}))}))}},u=function(e,n){return function(t,a,s){var c=s.api;return new Promise((function(t,a){(0,r.DI)(e,i.vT.getRoleById),c((0,o.Z)((0,o.Z)({},i.vT.getRoleById),{},{body:n})).then((function(e){var n=e.data;t(n)})).catch((function(e){var n=e.message;a(n)}))}))}},l=function(e){return function(n,t,r){var a=r.api;return new Promise((function(n,t){a((0,o.Z)((0,o.Z)({},i.vT.getPermissions),{},{body:e})).then((function(e){var t=e.data;n(t)})).catch((function(e){var n=e.message;t(n)}))}))}},d=function(e,n){return function(t,a,s){var c=s.api;return new Promise((function(t,a){(0,r.DI)(e,i.vT.deleteRoles),c((0,o.Z)((0,o.Z)({},i.vT.deleteRoles),{},{body:n})).then((function(e){var n=e.data;t(n)})).catch((function(e){var n=e.message;a(n)}))}))}}},79325:function(e,n,t){t.d(n,{Z:function(){return a}});t(47313);var o=t(97890),i=t(24323),r=t(46417);function a(e){var n=e.title,t=e.path,a=e.activeTab,s=(0,o.s0)();return(0,r.jsxs)("div",{className:"report-header",children:[(0,r.jsx)("img",{src:i,alt:"backIcon",className:"backIcon",onClick:function(){s(t,{state:{activeTab:a}})}}),(0,r.jsx)("span",{children:n})]})}},46495:function(e,n,t){t.d(n,{Z:function(){return i}});t(47313);var o=t(46417);function i(e){var n=e.text,t=e.trigger;return(0,o.jsx)("button",{className:"green-btn",onClick:t,children:n})}},34787:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var o=t(47313),i=t(93433),r=t(29439),a=t(79325),s=(t(94230),t(46495)),c=t(1084),u=t(9038),l=t(70816),d=t.n(l),f=t(59385),m=t(97890),v=t(8512),A=t(7861),h=(t(88282),t(46417));var p=function(e){var n=(0,m.TH)().state,t=(0,m.s0)(),c=sessionStorage.getItem("token"),u=(0,A.Z)(c),l=(0,o.useState)(""),f=(0,r.Z)(l,2),p=f[0],x=f[1],g=(0,o.useState)([]),R=(0,r.Z)(g,2),N=R[0],j=R[1],b=(0,o.useState)([]),C=(0,r.Z)(b,2),I=C[0],Z=C[1];function T(e){return e[0].toUpperCase()+e.slice(1)}return(0,o.useEffect)((function(){var t;null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t._id&&function(){var t={id:null===n||void 0===n?void 0:n.data._id};e.getRoleById(t).then((function(e){console.log(e.permissions),j(e.permissions),x(e.roleName)})).catch((function(e){console.log(e)}))}(),e.getAllPermissions().then((function(e){Z(e)})).catch((function(e){console.log(e)}))}),[]),(0,h.jsxs)("div",{className:"application-main",children:[(0,h.jsx)(v.Ix,{}),(0,h.jsx)(a.Z,{title:"".concat("Edit"===(null===n||void 0===n?void 0:n.type)?"Edit Role":"Add Role"),path:"/user-roles"}),(0,h.jsxs)("div",{className:"application-body",children:[(0,h.jsx)("h4",{children:"Role Details"}),(0,h.jsx)("div",{className:"form-fields",children:(0,h.jsxs)("div",{className:"form-field",children:[(0,h.jsx)("label",{children:"Role Name"}),(0,h.jsx)("input",{placeholder:"Enter here",className:"inputField",maxLength:20,onChange:function(e){return x(e.target.value)},value:p})]})}),(0,h.jsx)("div",{className:"form-fields",children:(0,h.jsxs)("div",{className:"form-field",children:[(0,h.jsx)("label",{children:"Permissions"}),(0,h.jsx)("div",{className:"checkbox-container",children:I.map((function(e){return(0,h.jsxs)("label",{class:"container",children:[e.name,(0,h.jsx)("input",{type:"checkbox",name:e.name,checked:N.indexOf(e.permissionId)>=0,onClick:function(){return function(e){var n=(0,i.Z)(N),t=n.indexOf(e);t>=0?n.splice(t,1):n.push(e),j(n)}(e.permissionId)}}),(0,h.jsx)("span",{class:"checkmark"})]})}))})]})})]}),(0,h.jsxs)("div",{className:"button-container",children:[(0,h.jsx)("p",{className:"cancel-btn",onClick:function(){return t("/user-roles")},children:"Cancel"}),(0,h.jsx)(s.Z,{text:"".concat("Edit"===(null===n||void 0===n?void 0:n.type)?"Update":"Save"),trigger:function(){if("Edit"===(null===n||void 0===n?void 0:n.type)){var o={roleName:p,description:"Admin",permissions:N,lastEditInfo:{userId:null===u||void 0===u?void 0:u.id,userName:null===u||void 0===u?void 0:u.name,roleName:null===u||void 0===u?void 0:u.roleId,editTime:d()().format("LLL")}};e.updateRole(o,n.id).then((function(e){v.Am.success("".concat(e.roleName," Role Updated"),{autoClose:1e3}),setTimeout((function(){t("/user-roles")}),1e3)})).catch((function(e){v.Am.error(T(e.error),{autoClose:1e3})}))}else{var i={roleName:p,description:"Admin",permissions:N};p?N.length>0?e.createNewRole(i).then((function(e){v.Am.success("".concat(e.roleName," Role Added"),{autoClose:1e3}),setTimeout((function(){t("/user-roles")}),1e3)})).catch((function(e){v.Am.error(T(e.error),{autoClose:1e3})})):v.Am.error("Please Select Permissions",{autoClose:1e3}):v.Am.error("Please Add Role Name",{autoClose:1e3})}}})]})]})},x=(0,c.$j)(null,(function(e){return(0,u.DE)({createNewRole:f.O9,updateRole:f.ul,getAllPermissions:f.IN,getRoleById:f.xQ},e)}))(p);function g(){return(0,h.jsx)(x,{})}},94230:function(){},24323:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAALCAYAAABPhbxiAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACsSURBVHgBnZHBDQIhEEXBtQBvBLjYglCQlOBWoG14WluwA+2AEvQC3NyjF4J/oiZqXIP7k2FmEl4m84ezDxlj1pxzl3NeeO97NqDJF2iD8vgLepO1dokoiB2r1RiIE4RMgMdebSV3IvCCYsb+Uz8tpbQwpKOJyFUT8e9uHNx0jx07VqmGnhijl1Ke6RRKqTn6fRX4hLXWHOWqBm5emxDCgWDs7YQQ25TSdQi8ARteRXW+qdqtAAAAAElFTkSuQmCC"}}]);