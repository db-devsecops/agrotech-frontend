"use strict";(self.webpackChunkagrotech_frontend=self.webpackChunkagrotech_frontend||[]).push([[3681],{43681:function(e,t,r){r.r(t),r.d(t,{default:function(){return oe}});var i,n=r(15861),o=r(1413),a=r(15671),s=r(43144),l=r(60136),p=r(29388),d=r(87757),u=r(98248),y=(r(32224),r(5034)),c=(r(90126),r(18964),r(77226),r(58720),r(63299),r(79780),r(67503)),f=r(54069),b=r(78326),v=r(62389),m=r(86755),h=r(98856),g=r(77284),w=r(84615),_=r(77822),S=r(9182),I=r(71453),C=r(35569),k=(r(59537),r(65343),r(61340)),x=r(96326),Z=r(48916),j=r(74436),R=r(2908),T=r(79143),F=r(9265),N=r(32387),O=r(51767),P=r(63379),D=r(4405),E=r(5900),L=r(15976),A=r(47004),U=r(56970),J=r(2798),q=r(5591),z=r(60560),G=r(42569),M=r(88010),Q=r(34070),V=r(8410),Y=i=function(e){(0,l.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).age=null,e.ageReceived=null,e.displayCount=null,e.maxObservations=1,e}return(0,s.Z)(r,[{key:"clone",value:function(){return new i({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}}]),r}(V.wq);(0,u._)([(0,C.Cb)({type:Number,json:{write:!0}})],Y.prototype,"age",void 0),(0,u._)([(0,C.Cb)({type:Number,json:{write:!0}})],Y.prototype,"ageReceived",void 0),(0,u._)([(0,C.Cb)({type:Number,json:{write:!0}})],Y.prototype,"displayCount",void 0),(0,u._)([(0,C.Cb)({type:Number,json:{write:!0}})],Y.prototype,"maxObservations",void 0);var W=Y=i=(0,u._)([(0,Z.j)("esri.layers.support.PurgeOptions")],Y),H=r(18185),B=r(71169),K=r(16636),X=r(18107),$=r(26208),ee=r(13179),te=w.Z.getLogger("esri.layers.StreamLayer"),re=(0,z.v)(),ie=function(e){(0,l.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;(0,a.Z)(this,r);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).copyright=null,e.definitionExpression=null,e.displayField=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.fieldsIndex=null,e.geometryDefinition=null,e.geometryType=null,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.maxReconnectionAttempts=0,e.maxReconnectionInterval=20,e.maxScale=0,e.minScale=0,e.objectIdField=null,e.operationalLayerType="ArcGISStreamLayer",e.popupEnabled=!0,e.popupTemplate=null,e.purgeOptions=new W,e.screenSizePerspectiveEnabled=!0,e.sourceJSON=null,e.spatialReference=$.Z.WGS84,e.type="stream",e.url=null,e.updateInterval=300,e.webSocketUrl=null,e}return(0,s.Z)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,o.Z)({url:e},t):e}},{key:"load",value:function(e){var t=this;if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new g.Z("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);var r=(0,_.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(I.r9).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){(0,G.YN)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){var n=(0,b.a)(i,t,r)||void 0;return n||te.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),n}if(t.defaultSymbol)return t.types&&t.types.length?new f.Z({defaultSymbol:ne(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:ne(e.symbol,e,r)}}))}):new c.Z({symbol:ne(t.defaultSymbol,t,r)})}},{key:"createPopupTemplate",value:function(e){return(0,K.eZ)(this,e)}},{key:"createQuery",value:function(){var e=new B.Z;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}},{key:"getFieldDomain",value:function(e,t){if(!this.fields)return null;var r=null;return this.fields.some((function(t){return t.name===e&&(r=t.domain),!!r})),r}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"serviceSupportsSpatialReference",value:function(e){return!0}},{key:"_fetchService",value:function(){var e=(0,n.Z)(d.mark((function e(t){var r,i,n,a;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.webSocketUrl){e.next=12;break}if(null!==(i=this.timeInfo)&&void 0!==i&&i.trackIdField){e.next=3;break}throw new g.Z("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");case 3:if(this.objectIdField){e.next=5;break}throw new g.Z("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");case 5:if(this.fields){e.next=7;break}throw new g.Z("stream-layer:missing-metadata","The stream layer fields must be specified.");case 7:if(this.geometryType){e.next=9;break}throw new g.Z("stream-layer:missing-metadata","The stream layer geometryType must be specified.");case 9:this.url=this.webSocketUrl,e.next=18;break;case 12:if(this.sourceJSON){e.next=18;break}return e.next=15,(0,m.default)(this.parsedUrl.path,{query:(0,o.Z)((0,o.Z)({f:"json"},this.customParameters),this.parsedUrl.query),responseType:"json",signal:t});case 15:n=e.sent,a=n.data,this.sourceJSON=a;case 18:return e.abrupt("return",(this.sourceJSON=(0,o.Z)((0,o.Z)({},null!==(r=this.sourceJSON)&&void 0!==r?r:{}),{},{objectIdField:"__esri_stream_id__"}),this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}),(0,G.YN)(this.renderer,this.fieldsIndex),(0,G.UF)(this.timeInfo,this.fieldsIndex),(0,H.y)(this,{origin:"service"})));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}((0,P.b)((0,N.h)((0,U.n)((0,A.M)((0,L.Q)((0,F.Y)((0,D.q)((0,E.I)((0,S.R)((0,O.N)(T.Z)))))))))));(0,u._)([(0,C.Cb)({type:String})],ie.prototype,"copyright",void 0),(0,u._)([(0,C.Cb)({readOnly:!0})],ie.prototype,"defaultPopupTemplate",null),(0,u._)([(0,C.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],ie.prototype,"definitionExpression",void 0),(0,u._)([(0,C.Cb)({type:String})],ie.prototype,"displayField",void 0),(0,u._)([(0,C.Cb)({type:X.ZP})],ie.prototype,"elevationInfo",void 0),(0,u._)([(0,C.Cb)(q.d)],ie.prototype,"featureReduction",void 0),(0,u._)([(0,C.Cb)(re.fields)],ie.prototype,"fields",void 0),(0,u._)([(0,C.Cb)(re.fieldsIndex)],ie.prototype,"fieldsIndex",void 0),(0,u._)([(0,C.Cb)({type:ee.Z})],ie.prototype,"geometryDefinition",void 0),(0,u._)([(0,C.Cb)({type:R.Mk.apiValues,json:{read:{reader:R.Mk.read}}})],ie.prototype,"geometryType",void 0),(0,u._)([(0,C.Cb)(J.iR)],ie.prototype,"labelsVisible",void 0),(0,u._)([(0,C.Cb)({type:[M.Z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Q.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],ie.prototype,"labelingInfo",void 0),(0,u._)([(0,C.Cb)(J.rn)],ie.prototype,"legendEnabled",void 0),(0,u._)([(0,C.Cb)({type:["show","hide"]})],ie.prototype,"listMode",void 0),(0,u._)([(0,C.Cb)({type:k.z8})],ie.prototype,"maxReconnectionAttempts",void 0),(0,u._)([(0,C.Cb)({type:k.z8})],ie.prototype,"maxReconnectionInterval",void 0),(0,u._)([(0,C.Cb)(J.u1)],ie.prototype,"maxScale",void 0),(0,u._)([(0,C.Cb)(J.rO)],ie.prototype,"minScale",void 0),(0,u._)([(0,C.Cb)({type:String})],ie.prototype,"objectIdField",void 0),(0,u._)([(0,C.Cb)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],ie.prototype,"operationalLayerType",void 0),(0,u._)([(0,C.Cb)(J.C_)],ie.prototype,"popupEnabled",void 0),(0,u._)([(0,C.Cb)({type:y.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ie.prototype,"popupTemplate",void 0),(0,u._)([(0,C.Cb)({type:W})],ie.prototype,"purgeOptions",void 0),(0,u._)([(0,C.Cb)({types:v.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:v.o,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],ie.prototype,"renderer",null),(0,u._)([(0,x.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,x.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],ie.prototype,"readRenderer",null),(0,u._)([(0,C.Cb)(J.YI)],ie.prototype,"screenSizePerspectiveEnabled",void 0),(0,u._)([(0,C.Cb)()],ie.prototype,"sourceJSON",void 0),(0,u._)([(0,C.Cb)({type:$.Z,json:{origins:{service:{read:{source:"spatialReference"}}}}})],ie.prototype,"spatialReference",void 0),(0,u._)([(0,C.Cb)({json:{read:!1}})],ie.prototype,"type",void 0),(0,u._)([(0,C.Cb)(J.HQ)],ie.prototype,"url",void 0),(0,u._)([(0,C.Cb)({type:Number})],ie.prototype,"updateInterval",void 0),(0,u._)([(0,C.Cb)({type:String})],ie.prototype,"webSocketUrl",void 0),ie=(0,u._)([(0,Z.j)("esri.layers.StreamLayer")],ie);var ne=(0,j.d)({types:h.QT}),oe=ie}}]);